{
  "$schema": "https://ui.shadcn.com/schema/registry-item.json",
  "name": "data-table-08",
  "title": "Data Table 8",
  "description": "Drag-and-drop data table with sortable rows and reordering functionality",
  "dependencies": [
    "@dnd-kit/core",
    "@dnd-kit/modifiers",
    "@dnd-kit/sortable",
    "@dnd-kit/utilities",
    "lucide-react",
    "@tanstack/react-table"
  ],
  "registryDependencies": [
    "button",
    "table"
  ],
  "files": [
    {
      "path": "src/components/shadcn-studio/data-table/data-table-08.tsx",
      "content": "'use client'\n\nimport type { CSSProperties } from 'react'\nimport { useState, useId } from 'react'\n\nimport { ChevronDownIcon, ChevronUpIcon, GripVerticalIcon } from 'lucide-react'\n\nimport {\n  closestCenter,\n  DndContext,\n  KeyboardSensor,\n  MouseSensor,\n  TouchSensor,\n  useSensor,\n  useSensors,\n  type DragEndEvent\n} from '@dnd-kit/core'\nimport { restrictToHorizontalAxis } from '@dnd-kit/modifiers'\nimport { arrayMove, horizontalListSortingStrategy, SortableContext, useSortable } from '@dnd-kit/sortable'\nimport { CSS } from '@dnd-kit/utilities'\nimport type { Cell, ColumnDef, Header, SortingState } from '@tanstack/react-table'\nimport { flexRender, getCoreRowModel, getSortedRowModel, useReactTable } from '@tanstack/react-table'\n\nimport { Button } from '@/components/ui/button'\nimport { Table, TableBody, TableCell, TableHead, TableHeader, TableRow } from '@/components/ui/table'\n\ntype Employee = {\n  employeeId: number\n  firstName: string\n  lastName: string\n  jobTitle: string\n  department: string\n  dob: string\n  hireDate: string\n  salary: number\n}\n\nconst data: Employee[] = [\n  {\n    employeeId: 1,\n    firstName: 'John',\n    lastName: 'Doe',\n    jobTitle: 'Software Engineer',\n    department: 'Engineering',\n    dob: '1990-01-01',\n    hireDate: '2020-01-15',\n    salary: 80000\n  },\n  {\n    employeeId: 2,\n    firstName: 'Jane',\n    lastName: 'Smith',\n    jobTitle: 'Product Manager',\n    department: 'Product',\n    dob: '1985-05-20',\n    hireDate: '2019-03-10',\n    salary: 95000\n  },\n  {\n    employeeId: 3,\n    firstName: 'Alice',\n    lastName: 'Johnson',\n    jobTitle: 'UX Designer',\n    department: 'Design',\n    dob: '1992-07-30',\n    hireDate: '2021-06-01',\n    salary: 70000\n  },\n  {\n    employeeId: 4,\n    firstName: 'Bob',\n    lastName: 'Brown',\n    jobTitle: 'Data Analyst',\n    department: 'Analytics',\n    dob: '1988-11-15',\n    hireDate: '2018-09-20',\n    salary: 75000\n  }\n]\n\nconst columns: ColumnDef<Employee>[] = [\n  {\n    id: 'firstName',\n    header: 'First Name',\n    accessorKey: 'firstName',\n    cell: ({ row }) => <div className='font-medium'>{row.getValue('firstName')}</div>,\n    sortUndefined: 'last',\n    sortDescFirst: false\n  },\n  {\n    id: 'lastName',\n    header: 'Last Name',\n    accessorKey: 'lastName',\n    cell: ({ row }) => <div>{row.getValue('lastName')}</div>\n  },\n  {\n    id: 'jobTitle',\n    header: 'Job Title',\n    accessorKey: 'jobTitle',\n    cell: ({ row }) => <div>{row.getValue('jobTitle')}</div>\n  },\n  {\n    id: 'department',\n    header: 'Department',\n    accessorKey: 'department',\n    cell: ({ row }) => <div>{row.getValue('department')}</div>\n  },\n  {\n    id: 'dob',\n    header: 'Date of Birth',\n    accessorKey: 'dob',\n    cell: ({ row }) => <div>{row.getValue('dob')}</div>\n  },\n  {\n    id: 'hireDate',\n    header: 'Hire Date',\n    accessorKey: 'hireDate',\n    cell: ({ row }) => <div>{row.getValue('hireDate')}</div>\n  },\n  {\n    id: 'salary',\n    header: 'Salary',\n    accessorKey: 'salary',\n    cell: ({ row }) => {\n      const salary = parseFloat(row.getValue('salary'))\n\n      const formatted = new Intl.NumberFormat('en-US', {\n        style: 'currency',\n        currency: 'USD'\n      }).format(salary)\n\n      return <div>{formatted}</div>\n    }\n  }\n]\n\nconst DraggableColumnDataTableDemo = () => {\n  const [sorting, setSorting] = useState<SortingState>([])\n  const [columnOrder, setColumnOrder] = useState<string[]>(columns.map(column => column.id as string))\n\n  const table = useReactTable({\n    data,\n    columns,\n    columnResizeMode: 'onChange',\n    getCoreRowModel: getCoreRowModel(),\n    getSortedRowModel: getSortedRowModel(),\n    onSortingChange: setSorting,\n    state: {\n      sorting,\n      columnOrder\n    },\n    onColumnOrderChange: setColumnOrder,\n    enableSortingRemoval: false\n  })\n\n  function handleDragEnd(event: DragEndEvent) {\n    const { active, over } = event\n\n    if (active && over && active.id !== over.id) {\n      setColumnOrder(columnOrder => {\n        const oldIndex = columnOrder.indexOf(active.id as string)\n        const newIndex = columnOrder.indexOf(over.id as string)\n\n        return arrayMove(columnOrder, oldIndex, newIndex)\n      })\n    }\n  }\n\n  const sensors = useSensors(useSensor(MouseSensor, {}), useSensor(TouchSensor, {}), useSensor(KeyboardSensor, {}))\n\n  return (\n    <div className='w-full'>\n      <div className='rounded-md border'>\n        <DndContext\n          id={useId()}\n          collisionDetection={closestCenter}\n          modifiers={[restrictToHorizontalAxis]}\n          onDragEnd={handleDragEnd}\n          sensors={sensors}\n        >\n          <Table>\n            <TableHeader>\n              {table.getHeaderGroups().map(headerGroup => (\n                <TableRow key={headerGroup.id} className='bg-muted/50 [&>th]:border-t-0'>\n                  <SortableContext items={columnOrder} strategy={horizontalListSortingStrategy}>\n                    {headerGroup.headers.map(header => (\n                      <DraggableTableHeader key={header.id} header={header} />\n                    ))}\n                  </SortableContext>\n                </TableRow>\n              ))}\n            </TableHeader>\n            <TableBody>\n              {table.getRowModel().rows?.length ? (\n                table.getRowModel().rows.map(row => (\n                  <TableRow key={row.id} data-state={row.getIsSelected() && 'selected'}>\n                    {row.getVisibleCells().map(cell => (\n                      <SortableContext key={cell.id} items={columnOrder} strategy={horizontalListSortingStrategy}>\n                        <DragAlongCell key={cell.id} cell={cell} />\n                      </SortableContext>\n                    ))}\n                  </TableRow>\n                ))\n              ) : (\n                <TableRow>\n                  <TableCell colSpan={columns.length} className='h-24 text-center'>\n                    No results.\n                  </TableCell>\n                </TableRow>\n              )}\n            </TableBody>\n          </Table>\n        </DndContext>\n      </div>\n      <p className='text-muted-foreground mt-4 text-center text-sm'>Data table with draggable columns</p>\n    </div>\n  )\n}\n\nconst DraggableTableHeader = ({ header }: { header: Header<Employee, unknown> }) => {\n  const { attributes, isDragging, listeners, setNodeRef, transform, transition } = useSortable({\n    id: header.column.id\n  })\n\n  const style: CSSProperties = {\n    opacity: isDragging ? 0.8 : 1,\n    position: 'relative',\n    transform: CSS.Translate.toString(transform),\n    transition,\n    whiteSpace: 'nowrap',\n    width: header.column.getSize(),\n    zIndex: isDragging ? 1 : 0\n  }\n\n  return (\n    <TableHead\n      ref={setNodeRef}\n      className='before:bg-border relative h-10 border-t before:absolute before:inset-y-0 before:left-0 before:w-px first:before:bg-transparent'\n      style={style}\n      aria-sort={\n        header.column.getIsSorted() === 'asc'\n          ? 'ascending'\n          : header.column.getIsSorted() === 'desc'\n            ? 'descending'\n            : 'none'\n      }\n    >\n      <div className='flex items-center justify-start gap-0.5'>\n        <Button\n          size='icon'\n          variant='ghost'\n          className='-ml-2 size-7'\n          {...attributes}\n          {...listeners}\n          aria-label='Drag to reorder'\n        >\n          <GripVerticalIcon className='opacity-60' aria-hidden='true' />\n        </Button>\n        <span className='grow truncate'>\n          {header.isPlaceholder ? null : flexRender(header.column.columnDef.header, header.getContext())}\n        </span>\n        <Button\n          size='icon'\n          variant='ghost'\n          className='group -mr-1 size-7'\n          onClick={header.column.getToggleSortingHandler()}\n          onKeyDown={e => {\n            if (header.column.getCanSort() && (e.key === 'Enter' || e.key === ' ')) {\n              e.preventDefault()\n              header.column.getToggleSortingHandler()?.(e)\n            }\n          }}\n          aria-label='Toggle sorting'\n        >\n          {{\n            asc: <ChevronUpIcon className='shrink-0 opacity-60' size={16} aria-hidden='true' />,\n            desc: <ChevronDownIcon className='shrink-0 opacity-60' size={16} aria-hidden='true' />\n          }[header.column.getIsSorted() as string] ?? (\n            <ChevronUpIcon className='shrink-0 opacity-0 group-hover:opacity-60' size={16} aria-hidden='true' />\n          )}\n        </Button>\n      </div>\n    </TableHead>\n  )\n}\n\nconst DragAlongCell = ({ cell }: { cell: Cell<Employee, unknown> }) => {\n  const { isDragging, setNodeRef, transform, transition } = useSortable({\n    id: cell.column.id\n  })\n\n  const style: CSSProperties = {\n    opacity: isDragging ? 0.8 : 1,\n    position: 'relative',\n    transform: CSS.Translate.toString(transform),\n    transition,\n    width: cell.column.getSize(),\n    zIndex: isDragging ? 1 : 0\n  }\n\n  return (\n    <TableCell ref={setNodeRef} className='truncate' style={style}>\n      {flexRender(cell.column.columnDef.cell, cell.getContext())}\n    </TableCell>\n  )\n}\n\nexport default DraggableColumnDataTableDemo\n",
      "type": "registry:component",
      "target": "components/shadcn-studio/data-table/data-table-08.tsx"
    }
  ],
  "type": "registry:component"
}